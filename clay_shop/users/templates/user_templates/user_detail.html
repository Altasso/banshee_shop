{% extends 'base.html' %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å - {{ user.username }} - Clay Art{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
                {% if request.user.is_staff %}
                <li class="breadcrumb-item"><a href="{% url 'user-list' %}">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a></li>
                {% endif %}
                <li class="breadcrumb-item active">{{ user.username }}</li>
            </ol>
        </nav>
    </div>
</div>

<div class="row">
    <!-- User Profile Card -->
    <div class="col-lg-4 mb-4">
        <div class="card">
            <div class="card-body text-center p-4">
                <div class="mb-3">
                    <div style="width: 120px; height: 120px; margin: 0 auto; background: linear-gradient(135deg, var(--moss-green), var(--warm-brown)); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px var(--shadow-soft);">
                        <span style="font-size: 3rem; color: white;">
                            {{ user.first_name.0|default:user.username.0|upper }}
                        </span>
                    </div>
                </div>
                <h3 class="mb-2">{{ user.get_full_name|default:user.username }}</h3>
                <p class="text-muted mb-3">@{{ user.username }}</p>
                
                <div class="mb-3">
                    {% if user.is_superuser %}
                    <span class="badge bg-danger">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
                    {% elif user.is_staff %}
                    <span class="badge bg-warning">–ü–µ—Ä—Å–æ–Ω–∞–ª</span>
                    {% else %}
                    <span class="badge bg-primary">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                    {% endif %}
                    
                    {% if user.is_active %}
                    <span class="badge bg-success">–ê–∫—Ç–∏–≤–µ–Ω</span>
                    {% else %}
                    <span class="badge bg-secondary">–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</span>
                    {% endif %}
                </div>

                <div class="d-grid gap-2">
                    {% if request.user == user or request.user.is_staff %}
                    <a href="{% url 'user-update' user.pk %}" class="btn btn-warning">
                        ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                    </a>
                    {% endif %}
                    
                    {% if request.user == user %}
                    <a href="{% url 'address-list' %}" class="btn btn-secondary">
                        üìç –ú–æ–∏ –∞–¥—Ä–µ—Å–∞
                    </a>
                    {% endif %}
                    
                    {% if request.user.is_staff and request.user != user %}
                    <button 
                        hx-delete="{% url 'user-delete' user.pk %}"
                        hx-confirm="–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ user.username }}?"
                        class="btn btn-danger">
                        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- User Information -->
    <div class="col-lg-8">
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-sm-4">
                        <p class="mb-0 fw-bold" style="color: var(--moss-green);">–ò–º—è</p>
                    </div>
                    <div class="col-sm-8">
                        <p class="mb-0">{{ user.first_name|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</p>
                    </div>
                </div>
                <hr>
                <div class="row mb-3">
                    <div class="col-sm-4">
                        <p class="mb-0 fw-bold" style="color: var(--moss-green);">–§–∞–º–∏–ª–∏—è</p>
                    </div>
                    <div class="col-sm-8">
                        <p class="mb-0">{{ user.last_name|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</p>
                    </div>
                </div>
                <hr>
                <div class="row mb-3">
                    <div class="col-sm-4">
                        <p class="mb-0 fw-bold" style="color: var(--moss-green);">Email</p>
                    </div>
                    <div class="col-sm-8">
                        <p class="mb-0">{{ user.email|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</p>
                    </div>
                </div>
                <hr>
                <div class="row mb-3">
                    <div class="col-sm-4">
                        <p class="mb-0 fw-bold" style="color: var(--moss-green);">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
                    </div>
                    <div class="col-sm-8">
                        <p class="mb-0">{{ user.username }}</p>
                    </div>
                </div>
                <hr>
                <div class="row mb-3">
                    <div class="col-sm-4">
                        <p class="mb-0 fw-bold" style="color: var(--moss-green);">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
                    </div>
                    <div class="col-sm-8">
                        <p class="mb-0">{{ user.date_joined|date:"d.m.Y H:i" }}</p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-4">
                        <p class="mb-0 fw-bold" style="color: var(--moss-green);">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</p>
                    </div>
                    <div class="col-sm-8">
                        <p class="mb-0">{{ user.last_login|date:"d.m.Y H:i"|default:"–ù–∏–∫–æ–≥–¥–∞" }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Permissions Card (for staff only) -->
        {% if request.user.is_staff %}
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-sm-4">
                        <p class="mb-0 fw-bold" style="color: var(--moss-green);">–°—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</p>
                    </div>
                    <div class="col-sm-8">
                        <p class="mb-0">
                            {% if user.is_superuser %}
                            <span class="badge bg-success">–î–∞</span>
                            {% else %}
                            <span class="badge bg-secondary">–ù–µ—Ç</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
                <hr>
                <div class="row mb-3">
                    <div class="col-sm-4">
                        <p class="mb-0 fw-bold" style="color: var(--moss-green);">–ü–µ—Ä—Å–æ–Ω–∞–ª</p>
                    </div>
                    <div class="col-sm-8">
                        <p class="mb-0">
                            {% if user.is_staff %}
                            <span class="badge bg-success">–î–∞</span>
                            {% else %}
                            <span class="badge bg-secondary">–ù–µ—Ç</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-4">
                        <p class="mb-0 fw-bold" style="color: var(--moss-green);">–ê–∫—Ç–∏–≤–µ–Ω</p>
                    </div>
                    <div class="col-sm-8">
                        <p class="mb-0">
                            {% if user.is_active %}
                            <span class="badge bg-success">–î–∞</span>
                            {% else %}
                            <span class="badge bg-danger">–ù–µ—Ç</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}